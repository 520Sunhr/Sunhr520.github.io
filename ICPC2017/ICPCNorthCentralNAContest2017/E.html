<hr>
<p>title: AC<br>date: 2000-2-16 15:16:17<br>categories:<br>    - ICPC2017<br>tags:<br>    - conceal<br>mp3: <a href="http://domain.com/awesome.mp3" target="_blank" rel="noopener">http://domain.com/awesome.mp3</a></p>
<hr>
<pre><code class="cpp"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="keyword">constexpr</span> <span class="keyword">int</span> maxn = <span class="number">1e4</span> + <span class="number">5</span>;
<span class="keyword">int</span> cnt,n,m;
<span class="built_in">std</span>::<span class="built_in">unordered_map</span>&lt;<span class="built_in">std</span>::<span class="built_in">string</span>,<span class="keyword">int</span>&gt; mp;
<span class="keyword">char</span> s1[maxn],s2[maxn],s3[maxn];
<span class="keyword">bool</span> has[maxn][maxn],is[maxn][maxn];
<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>
<span class="function"></span>{
    <span class="built_in">scanf</span>(<span class="string">"%d%d"</span>,&amp;n,&amp;m);
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
    {
        <span class="built_in">scanf</span>(<span class="string">"%s%s%s"</span>,s1,s2,s3);
        <span class="keyword">if</span>(!mp[s1])
            mp[s1]=++cnt;
        <span class="keyword">if</span>(!mp[s3])
            mp[s3]=++cnt;
        <span class="keyword">if</span>(s2[<span class="number">0</span>]==<span class="string">'i'</span>)
            is[mp[s1]][mp[s3]]=<span class="literal">true</span>;
        <span class="keyword">else</span>
            has[mp[s1]][mp[s3]]=<span class="literal">true</span>;
    }
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)
        is[i][i]=<span class="literal">true</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=cnt;k++)    <span class="comment">//is</span>
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)
            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=cnt;j++)
                is[i][j]|=is[i][k]&amp;&amp;is[k][j];
    <span class="keyword">for</span>(<span class="keyword">int</span> k=<span class="number">1</span>;k&lt;=cnt;k++)    <span class="comment">//has</span>
        <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=cnt;i++)
            <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=cnt;j++)
                has[i][j]|=(has[i][k]&amp;&amp;has[k][j])||(is[i][k]&amp;&amp;has[k][j])||(has[i][k]&amp;&amp;is[k][j]);
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=m;i++)
    {
        <span class="built_in">scanf</span>(<span class="string">"%s%s%s"</span>,s1,s2,s3);
        <span class="keyword">if</span>(s2[<span class="number">0</span>]==<span class="string">'i'</span>)
            <span class="built_in">printf</span>(<span class="string">"Query %d: "</span>,i),<span class="built_in">puts</span>(is[mp[s1]][mp[s3]]?<span class="string">"true"</span>:<span class="string">"false"</span>);
        <span class="keyword">if</span>(s2[<span class="number">0</span>]==<span class="string">'h'</span>)
            <span class="built_in">printf</span>(<span class="string">"Query %d: "</span>,i),<span class="built_in">puts</span>(has[mp[s1]][mp[s3]]?<span class="string">"true"</span>:<span class="string">"false"</span>);
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>

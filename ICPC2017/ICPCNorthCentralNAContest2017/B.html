<pre><code class="cpp"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span> ;
<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;
<span class="keyword">const</span> <span class="keyword">int</span> maxn=<span class="number">25</span>+<span class="number">10</span>;
<span class="keyword">const</span> <span class="keyword">int</span> mod=<span class="number">1e9</span>+<span class="number">7</span>;
<span class="keyword">int</span> d[(<span class="number">1</span>&lt;&lt;<span class="number">20</span>)+ <span class="number">5</span>][<span class="number">25</span>];
<span class="keyword">int</span> x[maxn],y[maxn];
<span class="built_in">map</span>&lt;<span class="built_in">string</span>,<span class="keyword">int</span>&gt; mp;
<span class="keyword">int</span> sz[maxn];<span class="comment">//����</span>
<span class="function"><span class="keyword">int</span> <span class="title">cal</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b)</span></span>{
    <span class="keyword">return</span> <span class="built_in">abs</span>(x[a]-x[b])+<span class="built_in">abs</span>(y[a]-y[b]);
}
<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>{
    <span class="keyword">int</span> n;
    <span class="built_in">scanf</span>(<span class="string">"%d"</span>,&amp;n);
    <span class="built_in">string</span> a;
    <span class="keyword">int</span> cnt=<span class="number">-1</span>;
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){
        <span class="built_in">cin</span>&gt;&gt;x[i]&gt;&gt;y[i]&gt;&gt;a;
        <span class="keyword">if</span>(!mp.count(a))mp[a]=++cnt;
        sz[i]=mp[a];
    }
    <span class="built_in">memset</span>(d,<span class="number">0x3f</span>,<span class="keyword">sizeof</span>(d));
    <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)d[<span class="number">1</span>&lt;&lt;sz[i]][i]=cal(i,<span class="number">0</span>);
    <span class="keyword">for</span>(<span class="keyword">int</span> s=<span class="number">0</span>;s &lt; (<span class="number">1</span>&lt;&lt;cnt+<span class="number">1</span>);s++){
       <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++){
            <span class="keyword">if</span>(s &amp; (<span class="number">1</span> &lt;&lt; sz[i])){
               <span class="keyword">for</span>(<span class="keyword">int</span> j=<span class="number">1</span>;j&lt;=n;j++){
                   <span class="keyword">if</span>(s &amp; (<span class="number">1</span>&lt;&lt;sz[j]))
                         d[s][i]=min(d[s][i],d[s^(<span class="number">1</span>&lt;&lt;sz[i])][j]+cal(i,j));
                }
           }
        }
   }
   <span class="keyword">int</span> ans=<span class="number">0x3f3f3f3f</span>;
   <span class="keyword">for</span>(<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)ans=min(ans,d[(<span class="number">1</span>&lt;&lt;cnt+<span class="number">1</span>)<span class="number">-1</span>][i] + cal(i,<span class="number">0</span>));
   <span class="built_in">cout</span>&lt;&lt;ans;
   <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>

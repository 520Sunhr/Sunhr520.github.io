
<!DOCTYPE html>
<html lang="en" class="loading">
<head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Beer Coasters - Development notes of SHR</title>
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="google" content="notranslate" />
    <meta name="keywords" content="Fechin,"> 
    <meta name="description" content="Often, in an average pub, the beer is served in a mug which is, quite obviously, wet from inside,bu,"> 
    <meta name="author" content="Sunhr520"> 
    <link rel="alternative" href="atom.xml" title="Development notes of SHR" type="application/atom+xml"> 
    <link rel="icon" href="/img/favicon.png"> 
    
<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.css">

    
<link rel="stylesheet" href="/css/diaspora.css">

    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    <script>
         (adsbygoogle = window.adsbygoogle || []).push({
              google_ad_client: "ca-pub-8691406134231910",
              enable_page_level_ads: true
         });
    </script>
    <script async custom-element="amp-auto-ads"
        src="https://cdn.ampproject.org/v0/amp-auto-ads-0.1.js">
    </script>
<meta name="generator" content="Hexo 4.2.0"></head>

<body class="loading">
    <span id="config-title" style="display:none">Development notes of SHR</span>
    <div id="loader"></div>
    <div id="single">
    <div id="top" style="display: block;">
    <div class="bar" style="width: 0;"></div>
    <a class="icon-home image-icon" href="javascript:;" data-url="http://Sunhr520.github.io"></a>
    <div title="播放/暂停" class="icon-play"></div>
    <h3 class="subtitle">Beer Coasters</h3>
    <div class="social">
        <!--<div class="like-icon">-->
            <!--<a href="javascript:;" class="likeThis active"><span class="icon-like"></span><span class="count">76</span></a>-->
        <!--</div>-->
        <div>
            <div class="share">
                <a title="获取二维码" class="icon-scan" href="javascript:;"></a>
            </div>
            <div id="qr"></div>
        </div>
    </div>
    <div class="scrollbar"></div>
</div>

    <div class="section">
        <div class="article">
    <div class='main'>
        <h1 class="title">Beer Coasters</h1>
        <div class="stuff">
            <span>二月 16, 2000</span>
            
  <ul class="post-tags-list" itemprop="keywords"><li class="post-tags-list-item"><a class="post-tags-list-link" href="/tags/conceal/" rel="tag">conceal</a></li></ul>


        </div>
        <div class="content markdown">
            <p>Often, in an average pub, the beer is served in a mug which is, quite obviously, wet from inside,but also wet from outside. The barkeeper typically has no capacity to dry freshly washedmugs. To protect the table and the (optional!) tablecloth, beer coasters are used in mostpubs. Originally, the beer coasters were round, nowadays you can fifind a variety of difffferentshapes. Despite being perceived as slightly unorthodox, square and even rectangular coastersare manufactured and used daily in many self-respecting restaurants, taverns, beer houses anddrinkeries of high and low profifiles.</p>
<p>A research related to the well-known satiric Ig Nobel Prize is being conducted in local pubs.The research aims to measure the rate of wear of the rectangular coasters. The rate of weardepends also on how much a coaster is getting wet from the contact with the wet bottom of beermugs. That, in turn, depends on the exact area of contact between the mug and the coaster.The exact position of the coaster and the mug on the table is recorded each time the mug is puton the coaster.</p>
<p>Manysophisticatedcalculationsintheresearchtakeasinputtheareaofcontact,whichhasto becalculatedbyasuitablecomputerprogram.Youaretowritesuchaprogram.</p>
<ul>
<li>Input Specification </li>
</ul>
<p>The input contains 7 space-separated integers on a single line. The fifirst three integers X, Y , R describe the coordinates of the beer mug bottom on the table. The center of the mug bottom is at (X, Y ) and the radius of the mug bottom is R. The next four integers Ax, Ay, Bx, By describe the coordinates of two opposite corners, (Ax, Ay) and (Bx, By), of the coaster on the table. The coaster is a rectangle placed with its sides parallel to the coordinate axes. All coordinates are in the range from m 1000 to 1000, the radius is in the range from 1 to 1000. The radius and the coordinates are expressed in the same units of length.</p>
<ul>
<li>Output Specifification </li>
</ul>
<p>Output a single decimal number with precision of 4 digits after the decimal point, the area of contact between the coaster and the beer mug. </p>
<p>本题答案不唯一，符合要求的答案均正确</p>
<p>样例输入</p>
<pre><code>-1 0 2 -1 -2 3 2</code></pre><p>样例输出</p>
<pre><code>6.2832</code></pre><h4 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h4><p>   给定一个圆心坐标和半径，一个矩形的两个不相邻的顶点，求其相交的面积</p>
<h4 id="解题思路"><a href="#解题思路" class="headerlink" title="解题思路"></a>解题思路</h4><p>   求圆与凸多边形相交面积模板<br>   //wtf？？这是个啥板子？？</p>
<h4 id="AC码"><a href="#AC码" class="headerlink" title="AC码"></a>AC码</h4><p>注：看了两份。。几乎相同，好像就是个板子题。。虽然我不知道板子-=-<br>    先附了一份学长crf大佬的AC码</p>
<figure class="highlight cpp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bits/stdc++.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> inf 1000000000000</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> M 100009</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> eps 1e-12</span></span><br><span class="line"><span class="meta">#<span class="meta-keyword">define</span> PI acos(-1.0)</span></span><br><span class="line"><span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;</span><br><span class="line"><span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span></span><br><span class="line"><span class="class">&#123;</span></span><br><span class="line">    <span class="keyword">double</span> x,y;</span><br><span class="line">    Point()&#123;&#125;</span><br><span class="line">    Point(<span class="keyword">double</span> xx,<span class="keyword">double</span> yy)&#123;x=xx;y=yy;&#125;</span><br><span class="line">    Point <span class="keyword">operator</span> -(Point s)&#123;<span class="keyword">return</span> Point(x-s.x,y-s.y);&#125;</span><br><span class="line">    Point <span class="keyword">operator</span> +(Point s)&#123;<span class="keyword">return</span> Point(x+s.x,y+s.y);&#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span> *(Point s)&#123;<span class="keyword">return</span> x*s.x+y*s.y;&#125;</span><br><span class="line">    <span class="keyword">double</span> <span class="keyword">operator</span> ^(Point s)&#123;<span class="keyword">return</span> x*s.y-y*s.x;&#125;</span><br><span class="line">&#125;p[M];</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a,<span class="keyword">double</span> b)</span></span>&#123;<span class="keyword">return</span> a&gt;b?a:b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">min</span><span class="params">(<span class="keyword">double</span> a,<span class="keyword">double</span> b)</span></span>&#123;<span class="keyword">return</span> a&lt;b?a:b;&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">(Point a)</span></span>&#123;<span class="keyword">return</span> <span class="built_in">sqrt</span>(a*a);&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dis</span><span class="params">(Point a,Point b)</span></span>&#123;<span class="keyword">return</span> len(b-a);&#125;<span class="comment">//两点之间的距离</span></span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">cross</span><span class="params">(Point a,Point b,Point c)</span><span class="comment">//叉乘</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (b-a)^(c-a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Point a,Point b,Point c)</span><span class="comment">//点乘 </span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">return</span> (b-a)*(c-a);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">judge</span><span class="params">(Point a,Point b,Point c)</span><span class="comment">//判断c是否在ab线段上（前提是c在直线ab上）</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">if</span> (c.x&gt;=min(a.x,b.x)</span><br><span class="line">       &amp;&amp;c.x&lt;=max(a.x,b.x)</span><br><span class="line">       &amp;&amp;c.y&gt;=min(a.y,b.y)</span><br><span class="line">       &amp;&amp;c.y&lt;=max(a.y,b.y)) <span class="keyword">return</span> <span class="number">1</span>;</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">double</span> <span class="title">area</span><span class="params">(Point b,Point c,<span class="keyword">double</span> r)</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="function">Point <span class="title">a</span><span class="params">(<span class="number">0.0</span>,<span class="number">0.0</span>)</span></span>;</span><br><span class="line">    <span class="keyword">if</span>(dis(b,c)&lt;eps) <span class="keyword">return</span> <span class="number">0.0</span>;</span><br><span class="line">    <span class="keyword">double</span> h=<span class="built_in">fabs</span>(cross(a,b,c))/dis(b,c);</span><br><span class="line">    <span class="keyword">if</span>(dis(a,b)&gt;r-eps&amp;&amp;dis(a,c)&gt;r-eps)<span class="comment">//两个端点都在圆的外面则分为两种情况</span></span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">double</span> angle=<span class="built_in">acos</span>(dot(a,b,c)/dis(a,b)/dis(a,c));</span><br><span class="line">        <span class="keyword">if</span>(h&gt;r-eps) <span class="keyword">return</span> <span class="number">0.5</span>*r*r*angle;<span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">if</span>(dot(b,a,c)&gt;<span class="number">0</span>&amp;&amp;dot(c,a,b)&gt;<span class="number">0</span>)</span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">double</span> angle1=<span class="number">2</span>*<span class="built_in">acos</span>(h/r);</span><br><span class="line">            <span class="keyword">return</span> <span class="number">0.5</span>*r*r*<span class="built_in">fabs</span>(angle-angle1)+<span class="number">0.5</span>*r*r*<span class="built_in">sin</span>(angle1);</span><br><span class="line">        &#125;<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0.5</span>*r*r*angle;</span><br><span class="line">    &#125;<span class="keyword">else</span> </span><br><span class="line">        <span class="keyword">if</span>(dis(a,b)&lt;r+eps&amp;&amp;dis(a,c)&lt;r+eps) <span class="keyword">return</span> <span class="number">0.5</span>*<span class="built_in">fabs</span>(cross(a,b,c));<span class="comment">//两个端点都在圆内的情况</span></span><br><span class="line">        <span class="keyword">else</span><span class="comment">//一个端点在圆上一个端点在圆内的情况</span></span><br><span class="line">        &#123;</span><br><span class="line">            <span class="keyword">if</span>(dis(a,b)&gt;dis(a,c)) swap(b,c);<span class="comment">//默认b在圆内</span></span><br><span class="line">            <span class="keyword">if</span>(<span class="built_in">fabs</span>(dis(a,b))&lt;eps) <span class="keyword">return</span> <span class="number">0.0</span>;<span class="comment">//ab距离为0直接返回0</span></span><br><span class="line">            <span class="keyword">if</span>(dot(b,a,c)&lt;eps)</span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">double</span> angle1=<span class="built_in">acos</span>(h/dis(a,b));</span><br><span class="line">                <span class="keyword">double</span> angle2=<span class="built_in">acos</span>(h/r)-angle1;</span><br><span class="line">                <span class="keyword">double</span> angle3=<span class="built_in">acos</span>(h/dis(a,c))-<span class="built_in">acos</span>(h/r);</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span>*dis(a,b)*r*<span class="built_in">sin</span>(angle2)+<span class="number">0.5</span>*r*r*angle3;</span><br><span class="line">            &#125;<span class="keyword">else</span></span><br><span class="line">            &#123;</span><br><span class="line">                <span class="keyword">double</span> angle1=<span class="built_in">acos</span>(h/dis(a,b));</span><br><span class="line">                <span class="keyword">double</span> angle2=<span class="built_in">acos</span>(h/r);</span><br><span class="line">                <span class="keyword">double</span> angle3=<span class="built_in">acos</span>(h/dis(a,c))-angle2;</span><br><span class="line">                <span class="keyword">return</span> <span class="number">0.5</span>*r*dis(a,b)*<span class="built_in">sin</span>(angle1+angle2)+<span class="number">0.5</span>*r*r*angle3;</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span></span><br><span class="line"><span class="function"></span>&#123;</span><br><span class="line">    <span class="keyword">int</span> T,n=<span class="number">4</span>;</span><br><span class="line">    <span class="keyword">double</span> rx,ry,R;</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lf%lf%lf"</span>,&amp;rx,&amp;ry,&amp;R);</span><br><span class="line">    <span class="built_in">scanf</span>(<span class="string">"%lf%lf%lf%lf"</span>,&amp;p[<span class="number">1</span>].x,&amp;p[<span class="number">1</span>].y,&amp;p[<span class="number">3</span>].x,&amp;p[<span class="number">3</span>].y);</span><br><span class="line">    p[<span class="number">2</span>].x=p[<span class="number">1</span>].x;p[<span class="number">2</span>].y=p[<span class="number">3</span>].y;</span><br><span class="line">    p[<span class="number">4</span>].x=p[<span class="number">3</span>].x;p[<span class="number">4</span>].y=p[<span class="number">1</span>].y;</span><br><span class="line">    p[<span class="number">5</span>]=p[<span class="number">1</span>];</span><br><span class="line">    <span class="function">Point <span class="title">O</span><span class="params">(rx,ry)</span></span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++) p[i]=p[i]-O;</span><br><span class="line">    O=Point(<span class="number">0</span>,<span class="number">0</span>);</span><br><span class="line">    <span class="keyword">double</span> sum=<span class="number">0</span>;</span><br><span class="line">    <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)</span><br><span class="line">    &#123;</span><br><span class="line">        <span class="keyword">int</span> j=i+<span class="number">1</span>;</span><br><span class="line">        <span class="keyword">double</span> s=area(p[i],p[j],R);</span><br><span class="line">        <span class="keyword">if</span> (cross(O,p[i],p[j])&gt;<span class="number">0</span>) sum+=s;<span class="keyword">else</span> sum-=s;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">printf</span>(<span class="string">"%.4lf\n"</span>,<span class="built_in">fabs</span>(sum));</span><br><span class="line">    <span class="keyword">return</span> <span class="number">0</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
            <!--[if lt IE 9]><script>document.createElement('audio');</script><![endif]-->
            <audio id="audio" loop="1" preload="auto" controls="controls" data-autoplay="false">
                <source type="audio/mpeg" src="http://domain.com/awesome.mp3">
            </audio>
            
        </div>
        
    <div id='gitalk-container' class="comment link"
        data-ae='false'
        data-ci=''
        data-cs=''
        data-r=''
        data-o=''
        data-a=''
        data-d='false'
    >查看评论</div>


    </div>
    
</div>


    </div>
</div>
</body>

<script src="//cdn.jsdelivr.net/npm/gitalk@1/dist/gitalk.min.js"></script>


<script src="//lib.baomitu.com/jquery/1.8.3/jquery.min.js"></script>
<script src="/js/plugin.js"></script>
<script src="/js/diaspora.js"></script>


<link rel="stylesheet" href="/photoswipe/photoswipe.css">
<link rel="stylesheet" href="/photoswipe/default-skin/default-skin.css">


<script src="/photoswipe/photoswipe.min.js"></script>
<script src="/photoswipe/photoswipe-ui-default.min.js"></script>


<!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">
    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>
    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">
        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>
        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">
            <div class="pswp__top-bar">
                <!--  Controls are self-explanatory. Order can be changed. -->
                <div class="pswp__counter"></div>
                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>
                <button class="pswp__button pswp__button--share" title="Share"></button>
                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>
                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>
                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                      <div class="pswp__preloader__cut">
                        <div class="pswp__preloader__donut"></div>
                      </div>
                    </div>
                </div>
            </div>
            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div> 
            </div>
            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>
            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>
            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>
        </div>
    </div>
</div>




</html>
<script src="/live2d-widget/autoload.js"></script>
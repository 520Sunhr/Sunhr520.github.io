<hr>
<p>title: Rain Gauge<br>date: 2000-2-16 15:16:17<br>categories:<br>    - UCF2015<br>tags:<br>    - conceal<br>mp3: <a href="http://domain.com/awesome.mp3" target="_blank" rel="noopener">http://domain.com/awesome.mp3</a></p>
<hr>
<p>When going to your internship you got a nice apartment with a skylight.  However, one crazy party later and you now have a square-shaped hole where your skylight used to be.  Rather than telling the landlord, you decided you would “fix” it by putting a circular pot to collect the water but, as the saying goes, round peg square hole. You need to determine how much of the square the circle covers to help you determine if you should buy a larger pot.  Don’t worry about the area not covered; you can do multiplication and subtraction easily in your head. </p>
<p><img src="https://sunhr520.github.io/CTU2019/CTUOpenContest2019/E.png" alt="E.png"></p>
<p>The Problem:   </p>
<p>Given the radius of a circular pot and the length of the square skylight, calculate the amount of skylight rain area covered by the pot assuming the two shapes have the same center (i.e., are coaxial) with respect to the direction rain falls from (up).  In other words, the center of the square will be directly above the center of the circle.  See the picture for an example; let up be the direction from above the page, while the dotted square is the skylight and the solid circle is the pot to collect water.  </p>
<p>The Input:   </p>
<p>The first input line contains a positive integer, n, indicating the number of scenarios to check. Each of the following n lines contains a pair of integers, s,r(1≤s≤100,1≤r≤100), which represents the length of the side of the skylight and the radius of the pot, respectively.   </p>
<p>The Output:   </p>
<p>For each scenario, output a single decimal representing the area under the skylight that is covered by the pot.  Round the answers to two decimal places (e.g., 1.234 rounds to 1.23 and 1.235 rounds to 1.24).  For this problem, use 3.14159265358979 as the value of pi. </p>
<blockquote>
<p>样例输入<br>3<br>1 1<br>8 5<br>10 4</p>
</blockquote>
<blockquote>
<p>样例输出<br>1.00<br>62.19<br>50.27</p>
</blockquote>
<h4 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h4><p>给定圆的半径和正方形的周长（圆和正方形中心相同），求他们的重合面积</p>
<h4 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h4><p>判断一下边界情况，然后每种情况分析公式，嗯，大概就是那样<br>我的话是直接用了圆与凸多边形的板子-=-省事-=-</p>
<h4 id="AC码"><a href="#AC码" class="headerlink" title="AC码"></a>AC码</h4><pre><code class="cpp"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="meta">#<span class="meta-keyword">define</span> inf 1000000000000</span>
<span class="meta">#<span class="meta-keyword">define</span> M 100009</span>
<span class="meta">#<span class="meta-keyword">define</span> eps 1e-12</span>
<span class="meta">#<span class="meta-keyword">define</span> PI 3.14159265358979</span>
<span class="class"><span class="keyword">struct</span> <span class="title">Point</span></span>
<span class="class">{</span>
    <span class="keyword">double</span> x,y;
    Point(){}
    Point(<span class="keyword">double</span> xx,<span class="keyword">double</span> yy){x=xx;y=yy;}
    Point <span class="keyword">operator</span> -(Point s){<span class="keyword">return</span> Point(x-s.x,y-s.y);}
    Point <span class="keyword">operator</span> +(Point s){<span class="keyword">return</span> Point(x+s.x,y+s.y);}
    <span class="keyword">double</span> <span class="keyword">operator</span> *(Point s){<span class="keyword">return</span> x*s.x+y*s.y;}
    <span class="keyword">double</span> <span class="keyword">operator</span> ^(Point s){<span class="keyword">return</span> x*s.y-y*s.x;}
}p[M];
<span class="function"><span class="keyword">double</span> <span class="title">max</span><span class="params">(<span class="keyword">double</span> a,<span class="keyword">double</span> b)</span></span>{<span class="keyword">return</span> a&gt;b?a:b;}
<span class="function"><span class="keyword">double</span> <span class="title">min</span><span class="params">(<span class="keyword">double</span> a,<span class="keyword">double</span> b)</span></span>{<span class="keyword">return</span> a&lt;b?a:b;}
<span class="function"><span class="keyword">double</span> <span class="title">len</span><span class="params">(Point a)</span></span>{<span class="keyword">return</span> <span class="built_in">sqrt</span>(a*a);}
<span class="function"><span class="keyword">double</span> <span class="title">dis</span><span class="params">(Point a,Point b)</span></span>{<span class="keyword">return</span> len(b-a);}<span class="comment">//两点之间的距离</span>
<span class="function"><span class="keyword">double</span> <span class="title">cross</span><span class="params">(Point a,Point b,Point c)</span><span class="comment">//叉乘</span></span>
<span class="function"></span>{
    <span class="keyword">return</span> (b-a)^(c-a);
}
<span class="function"><span class="keyword">double</span> <span class="title">dot</span><span class="params">(Point a,Point b,Point c)</span><span class="comment">//点乘 </span></span>
<span class="function"></span>{
    <span class="keyword">return</span> (b-a)*(c-a);
}
<span class="function"><span class="keyword">int</span> <span class="title">judge</span><span class="params">(Point a,Point b,Point c)</span><span class="comment">//判断c是否在ab线段上（前提是c在直线ab上）</span></span>
<span class="function"></span>{
    <span class="keyword">if</span> (c.x&gt;=min(a.x,b.x)
       &amp;&amp;c.x&lt;=max(a.x,b.x)
       &amp;&amp;c.y&gt;=min(a.y,b.y)
       &amp;&amp;c.y&lt;=max(a.y,b.y)) <span class="keyword">return</span> <span class="number">1</span>;
    <span class="keyword">return</span> <span class="number">0</span>;
}
<span class="function"><span class="keyword">double</span> <span class="title">area</span><span class="params">(Point b,Point c,<span class="keyword">double</span> r)</span></span>
<span class="function"></span>{
    <span class="function">Point <span class="title">a</span><span class="params">(<span class="number">0.0</span>,<span class="number">0.0</span>)</span></span>;
    <span class="keyword">if</span>(dis(b,c)&lt;eps) <span class="keyword">return</span> <span class="number">0.0</span>;
    <span class="keyword">double</span> h=<span class="built_in">fabs</span>(cross(a,b,c))/dis(b,c);
    <span class="keyword">if</span>(dis(a,b)&gt;r-eps&amp;&amp;dis(a,c)&gt;r-eps)<span class="comment">//两个端点都在圆的外面则分为两种情况</span>
    {
        <span class="keyword">double</span> angle=<span class="built_in">acos</span>(dot(a,b,c)/dis(a,b)/dis(a,c));
        <span class="keyword">if</span>(h&gt;r-eps) <span class="keyword">return</span> <span class="number">0.5</span>*r*r*angle;<span class="keyword">else</span> 
        <span class="keyword">if</span>(dot(b,a,c)&gt;<span class="number">0</span>&amp;&amp;dot(c,a,b)&gt;<span class="number">0</span>)
        {
            <span class="keyword">double</span> angle1=<span class="number">2</span>*<span class="built_in">acos</span>(h/r);
            <span class="keyword">return</span> <span class="number">0.5</span>*r*r*<span class="built_in">fabs</span>(angle-angle1)+<span class="number">0.5</span>*r*r*<span class="built_in">sin</span>(angle1);
        }<span class="keyword">else</span> <span class="keyword">return</span> <span class="number">0.5</span>*r*r*angle;
    }<span class="keyword">else</span> 
        <span class="keyword">if</span>(dis(a,b)&lt;r+eps&amp;&amp;dis(a,c)&lt;r+eps) <span class="keyword">return</span> <span class="number">0.5</span>*<span class="built_in">fabs</span>(cross(a,b,c));<span class="comment">//两个端点都在圆内的情况</span>
        <span class="keyword">else</span><span class="comment">//一个端点在圆上一个端点在圆内的情况</span>
        {
            <span class="keyword">if</span>(dis(a,b)&gt;dis(a,c)) swap(b,c);<span class="comment">//默认b在圆内</span>
            <span class="keyword">if</span>(<span class="built_in">fabs</span>(dis(a,b))&lt;eps) <span class="keyword">return</span> <span class="number">0.0</span>;<span class="comment">//ab距离为0直接返回0</span>
            <span class="keyword">if</span>(dot(b,a,c)&lt;eps)
            {
                <span class="keyword">double</span> angle1=<span class="built_in">acos</span>(h/dis(a,b));
                <span class="keyword">double</span> angle2=<span class="built_in">acos</span>(h/r)-angle1;
                <span class="keyword">double</span> angle3=<span class="built_in">acos</span>(h/dis(a,c))-<span class="built_in">acos</span>(h/r);
                <span class="keyword">return</span> <span class="number">0.5</span>*dis(a,b)*r*<span class="built_in">sin</span>(angle2)+<span class="number">0.5</span>*r*r*angle3;
            }<span class="keyword">else</span>
            {
                <span class="keyword">double</span> angle1=<span class="built_in">acos</span>(h/dis(a,b));
                <span class="keyword">double</span> angle2=<span class="built_in">acos</span>(h/r);
                <span class="keyword">double</span> angle3=<span class="built_in">acos</span>(h/dis(a,c))-angle2;
                <span class="keyword">return</span> <span class="number">0.5</span>*r*dis(a,b)*<span class="built_in">sin</span>(angle1+angle2)+<span class="number">0.5</span>*r*r*angle3;
            }
        }
}
<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>
<span class="function"></span>{
    <span class="keyword">int</span> T,n=<span class="number">4</span>;
    <span class="keyword">double</span> rx,ry,R;

    <span class="built_in">scanf</span>(<span class="string">"%d"</span>, &amp;T);

    <span class="keyword">while</span>(T--)
    {
    <span class="keyword">double</span> r, a;
    <span class="built_in">scanf</span>(<span class="string">"%lf%lf"</span>,&amp;a, &amp;r);
    rx = ry = <span class="number">0</span>; R = r;
    p[<span class="number">1</span>].x = p[<span class="number">1</span>].y = -(a / <span class="number">2.0</span>);
    p[<span class="number">3</span>].x = p[<span class="number">3</span>].y = (a / <span class="number">2.0</span>);

    <span class="comment">//scanf("%lf%lf%lf",&amp;rx,&amp;ry,&amp;R);</span>
    <span class="comment">//scanf("%lf%lf%lf%lf",&amp;p[1].x,&amp;p[1].y,&amp;p[3].x,&amp;p[3].y);</span>
        p[<span class="number">2</span>].x=p[<span class="number">1</span>].x;p[<span class="number">2</span>].y=p[<span class="number">3</span>].y;
        p[<span class="number">4</span>].x=p[<span class="number">3</span>].x;p[<span class="number">4</span>].y=p[<span class="number">1</span>].y;
        p[<span class="number">5</span>]=p[<span class="number">1</span>];
        <span class="function">Point <span class="title">O</span><span class="params">(rx,ry)</span></span>;
        <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n+<span class="number">1</span>;i++) p[i]=p[i]-O;
        O=Point(<span class="number">0</span>,<span class="number">0</span>);
        <span class="keyword">double</span> sum=<span class="number">0</span>;
           <span class="keyword">for</span> (<span class="keyword">int</span> i=<span class="number">1</span>;i&lt;=n;i++)
        {
            <span class="keyword">int</span> j=i+<span class="number">1</span>;
            <span class="keyword">double</span> s=area(p[i],p[j],R);
            <span class="keyword">if</span> (cross(O,p[i],p[j])&gt;<span class="number">0</span>) sum+=s;<span class="keyword">else</span> sum-=s;
        }
        <span class="built_in">printf</span>(<span class="string">"%.2lf\n"</span>,<span class="built_in">fabs</span>(sum));
    }
    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>

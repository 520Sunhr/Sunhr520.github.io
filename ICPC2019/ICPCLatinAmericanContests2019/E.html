<hr>
<p>title:<br>date: 2000-2-16 15:16:17<br>categories:<br>    - ICPC2019<br>tags:<br>    - conceal</p>
<hr>
<p><a href="http://123.57.35.184/p/1038" target="_blank" rel="noopener">Oj链接</a></p>
<h2 id="题意"><a href="#题意" class="headerlink" title="题意"></a>题意</h2><p>给一个首尾相连的字符串，求有多少区间长度不大于S且至少有一个字符’E’</p>
<h2 id="题解"><a href="#题解" class="headerlink" title="题解"></a>题解</h2><p>解题方法：<a href="https://www.baidu.com/s?ie=utf-8&f=3&rsv_bp=1&rsv_idx=1&tn=baidu&wd=%E5%B0%BA%E5%8F%96%E6%B3%95&rsv_t=c456c%2BDAUlnJktQ87Rq%2FSVSlfORViS2APYJaw6bfzpIMLLz%2B6TdxMzdAFLw&rsv_enter=1&rsv_dl=ts_0&rsv_sug3=7&rsv_sug1=6&rsv_sug7=100&rsv_sug2=0&prefixsug=chiqufa&rsp=0&inputT=1816&rsv_sug4=1816" target="_blank" rel="noopener">尺取法</a></p>
<p>标程中会给出解释</p>
<h2 id="标程"><a href="#标程" class="headerlink" title="标程"></a>标程</h2><pre><code class="cpp"><span class="comment">//#pragma GCC optimize(2)//吸口氧气 </span>
<span class="comment">//#pragma GCC optimize(3)//吸口臭氧 </span>

<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="meta">#<span class="meta-keyword">define</span> in(x) (x) = read()</span>
<span class="meta">#<span class="meta-keyword">define</span> inn(x, y) in(x),in(y)</span>
<span class="meta">#<span class="meta-keyword">define</span> innn(x, y, z) inn(x, y),in(z)</span>
<span class="meta">#<span class="meta-keyword">define</span> innnn(x, y, z, w) inn(x, y),inn(z, w)</span>
<span class="meta">#<span class="meta-keyword">define</span> fre(x) for(int _=1; _&lt;=(x);_++)</span>
<span class="meta">#<span class="meta-keyword">define</span> free(x, y) for(int _=1;_&lt;=(x);_++)for(int __=1;__&lt;=(y);__++)</span>
<span class="meta">#<span class="meta-keyword">define</span> frein() int in(Loop_var);while(Loop_var--)</span>

<span class="comment">//#define int long long int</span>
<span class="comment">//#define int __int128</span>

<span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; pii;
<span class="meta">#<span class="meta-keyword">define</span> fi first</span>
<span class="meta">#<span class="meta-keyword">define</span> se second</span>
<span class="keyword">typedef</span> pair&lt;<span class="keyword">int</span>, pair&lt;<span class="keyword">int</span>, <span class="keyword">int</span>&gt; &gt; piii;
<span class="meta">#<span class="meta-keyword">define</span> fir first</span>
<span class="meta">#<span class="meta-keyword">define</span> sec second.first</span>
<span class="meta">#<span class="meta-keyword">define</span> thi second.second</span>

<span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>
<span class="function"></span>{
    <span class="keyword">int</span> ans = <span class="number">0</span>, mark = <span class="number">1</span>;
    <span class="keyword">int</span> t = getchar();
    <span class="keyword">while</span>(t &lt; <span class="string">'0'</span> || t &gt; <span class="string">'9'</span>)
    {
        <span class="keyword">if</span> (t == <span class="string">'-'</span>)
            mark = <span class="number">-1</span>;
        t = getchar();
    }
    <span class="keyword">while</span>(t &lt;= <span class="string">'9'</span> &amp;&amp; t &gt;= <span class="string">'0'</span>)
    {
        ans = (ans &lt;&lt; <span class="number">3</span>) + (ans &lt;&lt; <span class="number">1</span>) + t - <span class="string">'0'</span>;
        t = getchar();
    }

    <span class="keyword">return</span> ans * mark;    
}

<span class="function"><span class="keyword">int</span> <span class="title">qmi</span><span class="params">(<span class="keyword">int</span> a,<span class="keyword">int</span> b,<span class="keyword">int</span> p)</span></span>
<span class="function"></span>{
    <span class="keyword">int</span> res = <span class="number">1</span>;
    <span class="keyword">while</span>(b)
    {
        <span class="keyword">if</span>(b&amp;<span class="number">1</span>) res = (res*a)%p;
        a = a*a%p;
        b &gt;&gt;= <span class="number">1</span>;
    }
    <span class="keyword">return</span> res;
}

<span class="keyword">const</span> <span class="keyword">int</span> INF = <span class="number">0x3f3f3f3f</span>;
<span class="keyword">const</span> <span class="keyword">int</span> N = <span class="number">2e5</span>+<span class="number">5</span>, p = <span class="number">1e9</span> + <span class="number">7</span>;
<span class="built_in">string</span> s;<span class="keyword">int</span> n;

<span class="function"><span class="keyword">signed</span> <span class="title">main</span><span class="params">()</span></span>
<span class="function"></span>{
    ios::sync_with_stdio(<span class="literal">false</span>);
    <span class="built_in">cin</span>.tie(<span class="number">0</span>);
    <span class="built_in">cout</span>.tie(<span class="number">0</span>);
    <span class="comment">//IO</span>

    <span class="built_in">cin</span> &gt;&gt; s &gt;&gt; n;s+=s;
    <span class="keyword">long</span> <span class="keyword">long</span> ans = <span class="number">0</span>;

    <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>, r = <span class="number">-1</span>, x = <span class="number">0</span>; <span class="number">2</span>*i&lt;s.size(); i++){
        <span class="comment">//自左向右遍历一遍S</span>
        <span class="keyword">while</span>(r + <span class="number">1</span> &lt; s.size() &amp;&amp;!x) x+=(s[++r]==<span class="string">'E'</span>);
        <span class="comment">//找到此位置 i 向右的第一个'E'的位置 r</span>
        <span class="comment">//原因是区间要求至少有1个E</span>
        ans += max(<span class="number">0</span>,n-(r-i));
        <span class="comment">//当有1个E的条件满足后,当前位置会从i移动到r</span>
        <span class="comment">//那么这个区间可以有以下三种情况</span>
        <span class="comment">//    1. r-i 大于 n， 那么包含这个区间的区间显然无解</span>
        <span class="comment">//    2. r-i 恰好等于 n， 那么包含这个区间的区间有且仅有 一个</span>
        <span class="comment">//    3. r-i 小于 n， 那么'E'右边可以有 0 ~ n-(r-i)种可能</span>
        <span class="comment">//                    即 此时共有n-(r-i)个包含此区间且符合要求的区间</span>
        x -= (s[i]==<span class="string">'E'</span>);
    }

    <span class="built_in">cout</span> &lt;&lt; ans &lt;&lt; <span class="built_in">endl</span>;

    <span class="keyword">return</span> <span class="number">0</span>;
}

<span class="comment">//</span>
<span class="comment">//                       _oo0oo_</span>
<span class="comment">//                      o8888888o</span>
<span class="comment">//                      88" . "88</span>
<span class="comment">//                      (| -_- |)</span>
<span class="comment">//                      0\  =  /0</span>
<span class="comment">//                    ___/`---'\___</span>
<span class="comment">//                  .' \\|     |// '.</span>
<span class="comment">//                 / \\|||  :  |||// \</span>
<span class="comment">//                / _||||| -:- |||||- \</span>
<span class="comment">//               |   | \\\  -  /// |   |</span>
<span class="comment">//               | \_|  ''\---/''  |_/ |</span>
<span class="comment">//               \  .-\__  '-'  ___/-. /</span>
<span class="comment">//             ___'. .'  /--.--\  `. .'___</span>
<span class="comment">//          ."" '&lt;  `.___\_&lt;|&gt;_/___.' &gt;' "".</span>
<span class="comment">//         | | :  `- \`.;`\ _ /`;.`/ - ` : | |</span>
<span class="comment">//         \  \ `_.   \_ __\ /__ _/   .-` /  /</span>
<span class="comment">//     =====`-.____`.___ \_____/___.-`___.-'=====</span>
<span class="comment">//                       `=---='</span>
<span class="comment">//</span>
<span class="comment">//</span>
<span class="comment">//     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~</span>
<span class="comment">//</span>
<span class="comment">//               佛祖保佑         永无BUG</span>
<span class="comment">//          佛曰:  </span>
<span class="comment">//                  写字楼里写字间，写字间里程序员；  </span>
<span class="comment">//                  程序人员写程序，又拿程序换酒钱。  </span>
<span class="comment">//                  酒醒只在网上坐，酒醉还来网下眠；  </span>
<span class="comment">//                  酒醉酒醒日复日，网上网下年复年。  </span>
<span class="comment">//                  但愿老死电脑间，不愿鞠躬老板前；  </span>
<span class="comment">//                  奔驰宝马贵者趣，公交自行程序员。  </span>
<span class="comment">//                  别人笑我忒疯癫，我笑自己命太贱；  </span>
<span class="comment">//                  不见满街漂亮妹，哪个归得程序员？</span></code></pre>

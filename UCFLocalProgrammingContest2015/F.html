<hr>
<p>title: Balanced Strings<br>date: 2000-2-16 15:16:17<br>categories:<br>    - UCF2015<br>tags:<br>    - conceal<br>mp3: <a href="http://domain.com/awesome.mp3" target="_blank" rel="noopener">http://domain.com/awesome.mp3</a></p>
<hr>
<p>Being an individual obsessed with balancing and trying to find strings that meet that criteria, you have begun a new endeavor to study the curious structure of what we will call balanced strings. </p>
<p>Balanced strings are strings that maintain an equal ratio of consonants to vowels in all of their substrings.  What?  You don’t know the difference between a consonant and a vowel?  Vowels are the characters ‘a’, ‘e’, ‘i’, ‘o’, ‘u’ and sometimes ‘y’.  Actually, you don’t like the character ‘y’ because this makes the problem much harder.  What was the difficulty level of this problem again?  Oh yeah Medium!  We can’t have a problem about consonants and vowels that makes ‘y’ sometimes a vowel!  That would make the problem a Hard and too many hard problems is a very bad thing.  Being obsessed with balance, you have decided that ‘y’ will be included with the vowels.  That way, there are 6 vowels and 20 consonants.  A nice balanced even number of both! Oh! I almost forgot!  A consonant is any letter that is not a vowel.  Also to simplify things (this is a medium problem after all!), we will consider strings composed of lowercase letters only. </p>
<p>Now you are ready to understand balanced strings!  A balanced string is a string that has an equal number of consonants and vowels in all of its substrings.  Well… not all of its substrings.  Just the substrings of even length!  For example, the string “orooji” has the following set of even- length substrings: {“or”, “ro”, “oo”, “oj”, “ji”, “oroo”, “rooj”, “ooji”, “orooji”}. In that set the following substrings are unbalanced: {“oo”, “oroo”, “ooji”, “orooji”}.  That is, the substrings do not contain an equal number of vowels and consonants.  So, the string “orooji” is not balanced.  But a string like “arup” is balanced.  The requisite even-length substrings are: {“ar”, “ru”, “up”, “arup”} and all these substrings are balanced (have the same number of vowels and consonants), thus the string “arup” is balanced.  Note that a balanced string may contain an odd number of characters, e.g., the string “ali” is balanced since all its even-length substrings ({“al”, “li”}) are balanced.  </p>
<p>Now you want to take words and erase some of the letters and replace them with new letters to form balanced strings.  Since this is a medium problem, we’ve taken the liberty of erasing some of the letters for you and replaced them with ‘?’ characters.  See! The problem is already halfway solved!  </p>
<p>The Problem:   </p>
<p>Given a string of lowercase letters and ‘?’ characters, count the number of ways to replace all the ‘?’ with lowercase letters such that the string results in a balanced string.  Two ways are considered different if there exists some i such that the i^{th}i<br>th<br>  character in one string differs from the i^{th}i<br>th<br>  character of the other string.  Note that all the ‘?’ do not have to be replaced by the same letter.   </p>
<p>The Input:   </p>
<p>The first input line contains a positive integer, n, indicating the number of strings to balance.  The strings are on the following n input lines, one string per line.  Each string contains only lowercase letters and/or ‘?’ characters.  Assume each input string has at least one character and at most 100 characters.  </p>
<p>The Output:  </p>
<p>For each string, output “String #d: v” where v is the number of ways to replace the questions marks with lower case letters.  It is guaranteed that v will fit in a signed 64-bit integer for the strings we provide.  Leave a blank line after the output for each string.    </p>
<blockquote>
<p>样例输入<br>7<br>orooji<br>al?<br>a?i<br>g?ha<br>a?u?<br>?????????????????<br>arup </p>
</blockquote>
<blockquote>
<p>样例输出<br>String #1: 0<br>String #2: 6<br>String #3: 20<br>String #4: 6<br>String #5: 400<br>String #6: 1117952409600000000<br>String #7: 1</p>
</blockquote>
<h4 id="题目大意"><a href="#题目大意" class="headerlink" title="题目大意"></a>题目大意</h4><p>输入一个字符串，替换其中的？使其达到元辅交错，输出方案数</p>
<h4 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h4><p>由题目不难看出是道dp题，dp方面不算好，想了好久</p>
<h4 id="AC码"><a href="#AC码" class="headerlink" title="AC码"></a>AC码</h4><pre><code class="cpp"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;bitset&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="meta">#<span class="meta-keyword">define</span> INT_MAX 2147483647</span>
<span class="meta">#<span class="meta-keyword">define</span> INT_MIN (- INT_MAX - 1)</span>
<span class="meta">#<span class="meta-keyword">define</span> PI acos(-1)</span>

<span class="meta">#<span class="meta-keyword">define</span> in(x) (x) = read()</span>
<span class="meta">#<span class="meta-keyword">define</span> fre(x) for(int _=(x); _;_--)</span>
<span class="meta">#<span class="meta-keyword">define</span> frein() int in(Loop_var);while(Loop_var--)</span>

<span class="function"><span class="keyword">inline</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>
<span class="function"></span>{
    <span class="keyword">int</span> ans = <span class="number">0</span>, mark = <span class="number">1</span>;
    <span class="keyword">int</span> t = getchar();
    <span class="keyword">while</span>(t &lt; <span class="string">'0'</span> || t &gt; <span class="string">'9'</span>)
    {
        <span class="keyword">if</span> (t == <span class="string">'-'</span>)
            mark = <span class="number">-1</span>;
        t = getchar();
    }
    <span class="keyword">while</span>(t &lt;= <span class="string">'9'</span> &amp;&amp; t &gt;= <span class="string">'0'</span>)
    {
        ans = (ans &lt;&lt; <span class="number">3</span>) + (ans &lt;&lt; <span class="number">1</span>) + t - <span class="string">'0'</span>;
        t = getchar();
    }

    <span class="keyword">return</span> ans * mark;    
}

<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> ll;
<span class="keyword">const</span> <span class="keyword">int</span> N=<span class="number">1e2</span>+<span class="number">10</span>;

ll dp[N][<span class="number">2</span>];

<span class="keyword">char</span> let[] = {<span class="string">'a'</span>,<span class="string">'e'</span>,<span class="string">'i'</span>,<span class="string">'o'</span>,<span class="string">'u'</span>,<span class="string">'y'</span>};

<span class="function"><span class="keyword">bool</span> <span class="title">check</span><span class="params">(<span class="keyword">char</span> c)</span></span>
<span class="function"></span>{
    <span class="keyword">for</span>(<span class="keyword">auto</span> t : let)
        <span class="keyword">if</span>(c == t) <span class="keyword">return</span> <span class="literal">true</span>;

    <span class="keyword">return</span> <span class="literal">false</span>;
}

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>
<span class="function"></span>{
    ios::sync_with_stdio(<span class="literal">false</span>);
    <span class="built_in">cin</span>.tie(<span class="number">0</span>);
    <span class="built_in">cout</span>.tie(<span class="number">0</span>);
    <span class="comment">//IO</span>

    <span class="keyword">int</span> T;<span class="built_in">cin</span> &gt;&gt; T;
    <span class="keyword">for</span>(<span class="keyword">int</span> _ = <span class="number">1</span>; _ &lt;= T; _++)
    {
        <span class="built_in">cout</span> &lt;&lt; <span class="string">"String #"</span> &lt;&lt; _ &lt;&lt; <span class="string">": "</span>;

        <span class="built_in">string</span> s;
        <span class="built_in">cin</span> &gt;&gt; s;

        dp[<span class="number">0</span>][<span class="number">0</span>] = dp[<span class="number">0</span>][<span class="number">1</span>] = <span class="number">1</span>;

        <span class="keyword">int</span> len = s.size();

        <span class="keyword">for</span>(<span class="keyword">int</span> i = <span class="number">0</span>; i &lt; len; i++)
        {
            <span class="keyword">if</span>(s[i] == <span class="string">'?'</span>)
            {
                dp[i + <span class="number">1</span>][<span class="number">0</span>]=<span class="number">1l</span>l * <span class="number">6</span> * dp[i][<span class="number">1</span>];
                dp[i + <span class="number">1</span>][<span class="number">1</span>]=<span class="number">1l</span>l * <span class="number">20</span> * dp[i][<span class="number">0</span>];
            }
            <span class="keyword">else</span>
            {
                dp[i + <span class="number">1</span>][<span class="number">0</span>]=dp[i + <span class="number">1</span>][<span class="number">1</span>]=<span class="number">0</span>;
                <span class="keyword">if</span>(check(s[i])) dp[i + <span class="number">1</span>][<span class="number">0</span>]=dp[i][<span class="number">1</span>];
                <span class="keyword">else</span> dp[i + <span class="number">1</span>][<span class="number">1</span>]=dp[i][<span class="number">0</span>];
            }
        }

        <span class="built_in">cout</span> &lt;&lt; dp[len][<span class="number">0</span>] + dp[len][<span class="number">1</span>] &lt;&lt; <span class="built_in">endl</span>;
        <span class="built_in">cout</span> &lt;&lt; <span class="built_in">endl</span>;
    }

    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>

<hr>
<p>title: TG<br>date: 2020-2-16 15:16:17<br>categories:<br>    - Trials<br>tags:<br>    - conceal<br>mp3: <a href="http://domain.com/awesome.mp3" target="_blank" rel="noopener">http://domain.com/awesome.mp3</a></p>
<hr>
<h3 id="描述"><a href="#描述" class="headerlink" title="描述"></a>描述</h3><pre><code>2020 年来了，BaoBao 本来满怀期待的迎接新的一年，但是新年爆发了肺炎让 BaoBao 很是郁闷。恰巧 BaoBao 有一台破旧的时光穿梭机，他想要通过这台时光穿梭机重新开启 2020。
现在 BaoBao 已经穿越到了新年的前一天，若明天会爆发肺炎的概率为 p ，如果爆发肺炎，BaoBao 将会继续使用时光穿梭机进行穿梭，但是他的时光穿梭机过于破旧，因此他只有 q 的概率穿越成功，而且如果它穿越失败，时光穿梭机将会损坏。
他想要请聪明的你帮他算一下他能够成功让肺炎消失的概率为多少？
答案对 1e9 + 7 取模</code></pre><h3 id="输入"><a href="#输入" class="headerlink" title="输入"></a>输入</h3><pre><code>第一行包含一个整数 T ，表示有 T 组测试数据。对于每一组测试数据：
输入包含两个整数 p、q （p、q为模 1e9 + 7意义下的值)

保证p、q 不同时为 1</code></pre><h3 id="输出"><a href="#输出" class="headerlink" title="输出"></a>输出</h3><pre><code>对于每组测试数据输出一个数，表示肺炎消失的概率。</code></pre><h3 id="题目分析"><a href="#题目分析" class="headerlink" title="题目分析"></a>题目分析</h3><pre><code>设不发生肺炎的概率为 E 则有 E = pqE + (1 - p)
化简得： E  = (1 - p ) / ( 1 - p * q)

设 k 的逆元为 k^-1,则原式变为:
E = (1 - p) * (1 - p * q)^-1 

只需要对该式子求解即可  </code></pre><h3 id="AC码"><a href="#AC码" class="headerlink" title="AC码"></a>AC码</h3><pre><code class="cpp"><span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdio&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstdlib&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cstring&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;iostream&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;algorithm&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;cmath&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;vector&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span><span class="meta-string">&lt;map&gt;</span></span>
<span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;bitset&gt;</span></span>
<span class="keyword">using</span> <span class="keyword">namespace</span> <span class="built_in">std</span>;

<span class="meta">#<span class="meta-keyword">define</span> INT_MAX 2147483647</span>
<span class="meta">#<span class="meta-keyword">define</span> INT_MIN (- INT_MAX - 1)</span>
<span class="meta">#<span class="meta-keyword">define</span> PI acos(-1)</span>

<span class="meta">#<span class="meta-keyword">define</span> in(x) (x) = read()</span>
<span class="meta">#<span class="meta-keyword">define</span> fre(x) for(int _=(x); _;_--)</span>
<span class="meta">#<span class="meta-keyword">define</span> frein() int in(Loop_var);while(Loop_var--)</span>

<span class="function"><span class="keyword">inline</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> <span class="title">read</span><span class="params">()</span></span>
<span class="function"></span>{
    <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> ans = <span class="number">0</span>, mark = <span class="number">1</span>;
    <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> t = getchar();
    <span class="keyword">while</span> (t &lt; <span class="string">'0'</span> || t &gt; <span class="string">'9'</span>)
    {
        <span class="keyword">if</span> (t == <span class="string">'-'</span>)
            mark = <span class="number">-1</span>;
        t = getchar();
    }
    <span class="keyword">while</span> (t &lt;= <span class="string">'9'</span> &amp;&amp; t &gt;= <span class="string">'0'</span>)
    {
        ans = (ans &lt;&lt; <span class="number">3</span>) + (ans &lt;&lt; <span class="number">1</span>) + t - <span class="string">'0'</span>;
        t = getchar();
    }

    <span class="keyword">return</span> ans * mark;
}

<span class="keyword">typedef</span> <span class="keyword">long</span> <span class="keyword">long</span> <span class="keyword">int</span> LL;

<span class="keyword">const</span> <span class="keyword">int</span> mod = <span class="number">1e9</span> + <span class="number">7</span>;

<span class="function"><span class="keyword">int</span> <span class="title">qmi</span><span class="params">(<span class="keyword">int</span> a, <span class="keyword">int</span> k)</span></span>
<span class="function"></span>{
    <span class="keyword">int</span> res = <span class="number">1</span>;
    <span class="keyword">while</span> (k)
    {
        <span class="keyword">if</span> (k &amp; <span class="number">1</span>) res = (LL)res * a % mod;
        a = (LL)a * a % mod;
        k &gt;&gt;= <span class="number">1</span>;
    }
    <span class="keyword">return</span> res;
}
<span class="comment">//快速幂 </span>

<span class="function"><span class="keyword">int</span> <span class="title">main</span><span class="params">()</span></span>
<span class="function"></span>{
    ios::sync_with_stdio(<span class="literal">false</span>);
    <span class="built_in">cin</span>.tie(<span class="number">0</span>);
    <span class="built_in">cout</span>.tie(<span class="number">0</span>);
    <span class="comment">//IO</span>

    frein()
    {
        LL in(p), in(q);

        LL h = <span class="number">1</span> - p + mod;
        <span class="comment">//分子 </span>
        LL d = <span class="number">1</span> - p * q;
        <span class="comment">//分母</span>

        d = qmi(d % mod, mod - <span class="number">2</span>);
        <span class="comment">//求逆元  </span>

        <span class="built_in">cout</span> &lt;&lt; h * (mod + d) % mod &lt;&lt; <span class="built_in">endl</span>;

    }

    <span class="keyword">return</span> <span class="number">0</span>;
}</code></pre>
